import{aP as me,r as k,aX as ke,c as te,o as re,q as he,Z as we,x as n,z as e,L as x,C as D,O as l,u as c,K as u,S as ae,aq as y,al as W,P as p,aT as j,Q as $,ac as se,aV as O,R as Ue,J as Te,T as Se,Y as Ie,y as i}from"./vue-vendor-Bsazo-x0.js";import{c as A,_ as Ce,s as d}from"./index-B-aWDFH9.js";import"./element-plus-CqiD73Lu.js";import"./vendor-Dr8jvgFu.js";const Ae=me("settings",()=>{const w=k({siteName:"Claude Relay Service",siteIcon:"",siteIconData:"",showAdminButton:!0,updatedAt:null}),C=k(!1),E=k(!1),U=async()=>{C.value=!0;try{const o=await A.get("/admin/oem-settings");return o&&o.success&&(w.value={...w.value,...o.data},T()),o}catch(o){throw console.error("Failed to load OEM settings:",o),o}finally{C.value=!1}},b=async o=>{E.value=!0;try{const f=await A.put("/admin/oem-settings",o);return f&&f.success&&(w.value={...w.value,...f.data},T()),f}catch(f){throw console.error("Failed to save OEM settings:",f),f}finally{E.value=!1}},M=async()=>{const o={siteName:"Claude Relay Service",siteIcon:"",siteIconData:"",showAdminButton:!0,updatedAt:null};return w.value={...o},await b(o)},T=()=>{if(w.value.siteName&&(document.title=`${w.value.siteName} - 管理后台`),w.value.siteIconData||w.value.siteIcon){const o=document.querySelector('link[rel="icon"]')||document.createElement("link");o.rel="icon",o.href=w.value.siteIconData||w.value.siteIcon,document.querySelector('link[rel="icon"]')||document.head.appendChild(o)}};return{oemSettings:w,loading:C,saving:E,loadOemSettings:U,saveOemSettings:b,resetOemSettings:M,applyOemSettings:T,formatDateTime:o=>o?new Date(o).toLocaleString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}):"",validateIconFile:o=>{const f=[];return o.size>350*1024&&f.push("图标文件大小不能超过 350KB"),["image/x-icon","image/png","image/jpeg","image/jpg","image/svg+xml"].includes(o.type)||f.push("不支持的文件类型，请选择 .ico, .png, .jpg 或 .svg 文件"),{isValid:f.length===0,errors:f}},fileToBase64:o=>new Promise((f,V)=>{const B=new FileReader;B.onload=F=>f(F.target.result),B.onerror=V,B.readAsDataURL(o)})}}),Be={class:"settings-container"},Ve={class:"card p-4 sm:p-6"},De={class:"mb-6"},Pe={class:"flex space-x-8"},Le={key:0,class:"py-12 text-center"},je={key:1},Ee={class:"table-container hidden sm:block"},Fe={class:"min-w-full"},Ne={class:"divide-y divide-gray-200/50 dark:divide-gray-600/50"},Re={class:"table-row"},We={class:"px-6 py-4"},Ke={class:"table-row"},Oe={class:"px-6 py-4"},Me={class:"space-y-3"},$e={key:0,class:"inline-flex items-center gap-3 rounded-lg bg-gray-50 p-3 dark:bg-gray-700"},qe=["src"],ze={class:"table-row"},He={class:"px-6 py-4"},Qe={class:"flex items-center"},_e={class:"inline-flex cursor-pointer items-center"},Je={class:"ml-3 text-sm font-medium text-gray-900 dark:text-gray-300"},Xe={class:"px-6 py-6",colspan:"2"},Ye={class:"flex items-center justify-between"},Ge={class:"flex gap-3"},Ze=["disabled"],et={key:0,class:"loading-spinner mr-2"},tt={key:1,class:"fas fa-save mr-2"},rt=["disabled"],at={key:0,class:"text-sm text-gray-500 dark:text-gray-400"},st={class:"space-y-4 sm:hidden"},lt={class:"glass-card p-4"},ot={class:"glass-card p-4"},nt={class:"space-y-3"},it={key:0,class:"inline-flex items-center gap-3 rounded-lg bg-gray-50 p-3 dark:bg-gray-700"},dt=["src"],ut={class:"glass-card p-4"},gt={class:"space-y-2"},ct={class:"inline-flex cursor-pointer items-center"},bt={class:"ml-3 text-sm font-medium text-gray-900 dark:text-gray-300"},ft={class:"glass-card p-4"},xt={class:"flex flex-col gap-3"},yt=["disabled"],pt={key:0,class:"loading-spinner mr-2"},vt={key:1,class:"fas fa-save mr-2"},mt=["disabled"],kt={key:0,class:"text-center text-sm text-gray-500 dark:text-gray-400"},ht={class:"mb-6 rounded-lg bg-white/80 p-6 shadow-lg backdrop-blur-sm dark:bg-gray-800/80"},wt={class:"flex items-center justify-between"},Ut={class:"relative inline-flex cursor-pointer items-center"},Tt={class:"mb-6 rounded-lg bg-white/80 p-6 shadow-lg backdrop-blur-sm dark:bg-gray-800/80"},St={class:"space-y-3"},It={class:"font-medium text-gray-700 dark:text-gray-300"},Ct={class:"ml-2 text-sm text-gray-500 dark:text-gray-400"},At={class:"relative inline-flex cursor-pointer items-center"},Bt=["onUpdate:modelValue"],Vt={class:"mb-6 rounded-lg bg-white/80 p-6 shadow-lg backdrop-blur-sm dark:bg-gray-800/80"},Dt={class:"mb-4 flex items-center justify-between"},Pt={key:0,class:"space-y-4"},Lt={class:"flex items-start justify-between"},jt={class:"flex-1"},Et={class:"flex items-center"},Ft={class:"font-semibold text-gray-800 dark:text-gray-200"},Nt={class:"text-sm text-gray-500 dark:text-gray-400"},Rt={class:"mt-3 space-y-1 text-sm"},Wt={key:0,class:"flex items-center text-gray-600 dark:text-gray-400"},Kt={class:"truncate"},Ot={key:1,class:"flex items-center text-gray-600 dark:text-gray-400"},Mt={class:"truncate"},$t={key:2,class:"flex items-center text-gray-600 dark:text-gray-400"},qt={class:"truncate"},zt={key:3,class:"flex items-center text-gray-600 dark:text-gray-400"},Ht={class:"truncate"},Qt={key:4,class:"flex items-center text-gray-600 dark:text-gray-400"},_t={class:"truncate"},Jt={key:5,class:"flex items-center text-gray-600 dark:text-gray-400"},Xt={class:"truncate"},Yt={key:6,class:"flex items-center text-gray-600 dark:text-gray-400"},Gt={class:"ml-4 flex items-center space-x-2"},Zt={class:"relative inline-flex cursor-pointer items-center"},er=["checked","onChange"],tr=["onClick"],rr=["onClick"],ar=["onClick"],sr={key:1,class:"py-8 text-center text-gray-500 dark:text-gray-400"},lr={class:"rounded-lg bg-white/80 p-6 shadow-lg backdrop-blur-sm dark:bg-gray-800/80"},or={class:"grid grid-cols-1 gap-4 md:grid-cols-3"},nr={class:"dark:to-gray-750 relative border-b border-gray-200 bg-gradient-to-r from-blue-50 to-indigo-50 px-6 py-5 dark:border-gray-700 dark:from-gray-800"},ir={class:"flex items-center justify-between"},dr={class:"flex items-center space-x-3"},ur={class:"text-xl font-semibold text-gray-900 dark:text-white"},gr={class:"mt-0.5 text-sm text-gray-600 dark:text-gray-400"},cr={class:"p-6"},br={class:"space-y-5"},fr={class:"relative"},xr=["disabled"],yr={key:0,class:"mt-1 text-xs text-amber-600 dark:text-amber-400"},pr={key:0},vr={class:"relative"},mr={key:0,class:"absolute inset-y-0 right-0 flex items-center pr-3"},kr={key:1,class:"absolute inset-y-0 right-0 flex items-center pr-3"},hr={key:0,class:"mt-2 flex items-start rounded-lg bg-blue-50 p-3 dark:bg-blue-900/20"},wr={class:"text-sm text-blue-700 dark:text-blue-300"},Ur={key:1,class:"space-y-5"},Tr={key:2,class:"space-y-5"},Sr={key:3,class:"space-y-5"},Ir={class:"grid grid-cols-1 gap-4 sm:grid-cols-2"},Cr={key:4,class:"rounded-xl border border-gray-200 bg-gray-50 p-4 dark:border-gray-700 dark:bg-gray-900/50"},Ar={class:"space-y-4"},Br={class:"flex items-center justify-between"},Vr={class:"flex cursor-pointer items-center",for:"enableSign"},Dr={key:0,class:"rounded-full bg-green-100 px-2 py-1 text-xs font-medium text-green-700 dark:bg-green-900/50 dark:text-green-400"},Pr={key:0},Lr={class:"border-t border-gray-200 bg-gray-50 px-6 py-4 dark:border-gray-700 dark:bg-gray-900/50"},jr={class:"flex items-center justify-between"},Er={class:"flex space-x-3"},Fr=["disabled"],Nr=["disabled"],Rr=Object.assign({name:"SettingsView"},{__name:"SettingsView",setup(w){const C=Ae(),{loading:E,saving:U,oemSettings:b}=ke(C),M=k(),T=k("branding"),g=k(!0),S=k(new AbortController),P=te({get(){return!b.value.showAdminButton},set(a){b.value.showAdminButton=!a}}),o=k(!1),f=k(!1),V=k(!1),B=k(!1),F={accountAnomaly:!0,quotaWarning:!0,systemError:!0,securityAlert:!0,rateLimitRecovery:!0},v=k({enabled:!1,platforms:[],notificationTypes:{...F},retrySettings:{maxRetries:3,retryDelay:1e3,timeout:1e4}}),L=k(!1),I=k(null),r=k({type:"wechat_work",name:"",url:"",enableSign:!1,secret:"",botToken:"",chatId:"",apiBaseUrl:"",proxyUrl:"",deviceKey:"",serverUrl:"",level:"",sound:"",group:"",host:"",port:null,secure:!1,user:"",pass:"",from:"",to:"",timeout:null,ignoreTLS:!1}),q=re(T,async a=>{g.value&&a==="webhook"&&await N()}),z=re(()=>r.value.type,a=>{o.value=!1,f.value=!1,I.value||(a==="bark"?(r.value.url="",r.value.enableSign=!1,r.value.secret="",r.value.botToken="",r.value.chatId="",r.value.apiBaseUrl="",r.value.proxyUrl="",r.value.host="",r.value.port=null,r.value.secure=!1,r.value.user="",r.value.pass="",r.value.from="",r.value.to="",r.value.timeout=null,r.value.ignoreTLS=!1):a==="smtp"?(r.value.url="",r.value.enableSign=!1,r.value.secret="",r.value.deviceKey="",r.value.serverUrl="",r.value.level="",r.value.sound="",r.value.group="",r.value.botToken="",r.value.chatId="",r.value.apiBaseUrl="",r.value.proxyUrl=""):a==="telegram"?(r.value.url="",r.value.enableSign=!1,r.value.secret="",r.value.deviceKey="",r.value.serverUrl="",r.value.level="",r.value.sound="",r.value.group="",r.value.host="",r.value.port=null,r.value.secure=!1,r.value.user="",r.value.pass="",r.value.from="",r.value.to="",r.value.timeout=null,r.value.ignoreTLS=!1,r.value.botToken="",r.value.chatId="",r.value.apiBaseUrl="",r.value.proxyUrl=""):(r.value.deviceKey="",r.value.serverUrl="",r.value.level="",r.value.sound="",r.value.group="",r.value.host="",r.value.port=null,r.value.secure=!1,r.value.user="",r.value.pass="",r.value.from="",r.value.to="",r.value.timeout=null,r.value.ignoreTLS=!1,r.value.botToken="",r.value.chatId="",r.value.apiBaseUrl="",r.value.proxyUrl=""))}),le=te(()=>r.value.type==="bark"?!!r.value.deviceKey:r.value.type==="telegram"?!!(r.value.botToken&&r.value.chatId):r.value.type==="smtp"?!!(r.value.host&&r.value.user&&r.value.pass&&r.value.to):!!r.value.url&&!o.value);he(async()=>{try{await C.loadOemSettings(),T.value==="webhook"&&await N()}catch{d("加载设置失败","error")}}),we(()=>{g.value=!1,S.value&&S.value.abort(),q&&q(),z&&z(),L.value&&(L.value=!1,I.value=null)});const N=async()=>{if(g.value)try{const a=await A.get("/admin/webhook/config",{signal:S.value.signal});if(a.success&&g.value){const t=a.config||{};v.value={...t,notificationTypes:{...F,...t.notificationTypes||{}}}}}catch(a){if(a.name==="AbortError"||!g.value)return;d("获取webhook配置失败","error"),console.error(a)}},R=async()=>{if(g.value)try{const a={...v.value,notificationTypes:{...F,...v.value.notificationTypes||{}}};(await A.post("/admin/webhook/config",a,{signal:S.value.signal})).success&&g.value&&(v.value=a,d("配置已保存","success"))}catch(a){if(a.name==="AbortError"||!g.value)return;d("保存配置失败","error"),console.error(a)}},oe=()=>{if(["bark","smtp","telegram"].includes(r.value.type)){o.value=!1,f.value=!1;return}const a=r.value.url;if(!a){o.value=!1,f.value=!1;return}try{new URL(a),a.startsWith("http://")||a.startsWith("https://")?(o.value=!1,f.value=!0):(o.value=!0,f.value=!1)}catch{o.value=!0,f.value=!1}},H=()=>{if(r.value.type==="bark"){if(!r.value.deviceKey)return d("请输入Bark设备密钥","error"),!1}else if(r.value.type==="telegram"){if(!r.value.botToken)return d("请输入 Telegram 机器人 Token","error"),!1;if(!r.value.chatId)return d("请输入 Telegram Chat ID","error"),!1;if(r.value.apiBaseUrl)try{const a=new URL(r.value.apiBaseUrl);if(!["http:","https:"].includes(a.protocol))return d("Telegram API 基础地址仅支持 http 或 https","error"),!1}catch{return d("请输入有效的 Telegram API 基础地址","error"),!1}if(r.value.proxyUrl)try{const a=new URL(r.value.proxyUrl);if(!["http:","https:","socks4:","socks4a:","socks5:"].includes(a.protocol))return d("Telegram 代理仅支持 http/https/socks 协议","error"),!1}catch{return d("请输入有效的 Telegram 代理地址","error"),!1}}else if(r.value.type==="smtp"){const a=[{field:"host",message:"SMTP服务器"},{field:"user",message:"用户名"},{field:"pass",message:"密码"},{field:"to",message:"收件人邮箱"}];for(const{field:t,message:s}of a)if(!r.value[t])return d(`请输入${s}`,"error"),!1}else{if(!r.value.url)return d("请输入Webhook URL","error"),!1;if(o.value)return d("请输入有效的Webhook URL","error"),!1}return!0},ne=async()=>{if(g.value&&H()){B.value=!0;try{let a;I.value?a=await A.put(`/admin/webhook/platforms/${I.value.id}`,r.value,{signal:S.value.signal}):a=await A.post("/admin/webhook/platforms",r.value,{signal:S.value.signal}),a.success&&g.value&&(d(I.value?"平台已更新":"平台已添加","success"),await N(),K())}catch(a){if(a.name==="AbortError"||!g.value)return;d(a.message||"操作失败","error"),console.error(a)}finally{g.value&&(B.value=!1)}}},ie=a=>{I.value=a,r.value={type:a.type||"wechat_work",name:a.name||"",url:a.url||"",enableSign:a.enableSign||!1,secret:a.secret||"",botToken:a.botToken||"",chatId:a.chatId||"",apiBaseUrl:a.apiBaseUrl||"",proxyUrl:a.proxyUrl||"",deviceKey:a.deviceKey||"",serverUrl:a.serverUrl||"",level:a.level||"",sound:a.sound||"",group:a.group||"",host:a.host||"",port:a.port??null,secure:a.secure||!1,user:a.user||"",pass:a.pass||"",from:a.from||"",to:Array.isArray(a.to)?a.to.join(", "):a.to||"",timeout:a.timeout??null,ignoreTLS:a.ignoreTLS||!1},L.value=!0},de=async a=>{if(g.value&&confirm("确定要删除这个平台吗？"))try{(await A.delete(`/admin/webhook/platforms/${a}`,{signal:S.value.signal})).success&&g.value&&(d("平台已删除","success"),await N())}catch(t){if(t.name==="AbortError"||!g.value)return;d("删除失败","error"),console.error(t)}},ue=async a=>{if(g.value)try{const t=await A.post(`/admin/webhook/platforms/${a}/toggle`,{},{signal:S.value.signal});t.success&&g.value&&(d(t.message,"success"),await N())}catch(t){if(t.name==="AbortError"||!g.value)return;d("操作失败","error"),console.error(t)}},ge=async a=>{if(g.value)try{const t={type:a.type,secret:a.secret,enableSign:a.enableSign};a.type==="bark"?(t.deviceKey=a.deviceKey,t.serverUrl=a.serverUrl,t.level=a.level,t.sound=a.sound,t.group=a.group):a.type==="smtp"?(t.host=a.host,t.port=a.port,t.secure=a.secure,t.user=a.user,t.pass=a.pass,t.from=a.from,t.to=a.to,t.ignoreTLS=a.ignoreTLS):a.type==="telegram"?(t.botToken=a.botToken,t.chatId=a.chatId,t.apiBaseUrl=a.apiBaseUrl,t.proxyUrl=a.proxyUrl):t.url=a.url,(await A.post("/admin/webhook/test",t,{signal:S.value.signal})).success&&g.value&&d("测试成功","success")}catch(t){if(t.name==="AbortError"||!g.value)return;d(t.error||t.message||"测试失败","error"),console.error(t)}},ce=async()=>{if(g.value&&H()){V.value=!0;try{(await A.post("/admin/webhook/test",r.value,{signal:S.value.signal})).success&&g.value&&d("测试成功","success")}catch(a){if(a.name==="AbortError"||!g.value)return;d(a.error||a.message||"测试失败","error"),console.error(a)}finally{g.value&&(V.value=!1)}}},be=async()=>{var a,t,s,m;if(g.value)try{(await A.post("/admin/webhook/test-notification",{},{signal:S.value.signal})).success&&g.value&&d("测试通知已发送","success")}catch(h){if(h.name==="AbortError"||!g.value)return;const ve=((t=(a=h==null?void 0:h.response)==null?void 0:a.data)==null?void 0:t.message)||((m=(s=h==null?void 0:h.response)==null?void 0:s.data)==null?void 0:m.error)||(h==null?void 0:h.message)||"发送失败";d(ve,"error"),console.error(h)}},K=()=>{g.value&&(L.value=!1,setTimeout(()=>{g.value&&(I.value=null,r.value={type:"wechat_work",name:"",url:"",enableSign:!1,secret:"",botToken:"",chatId:"",apiBaseUrl:"",proxyUrl:"",deviceKey:"",serverUrl:"",level:"",sound:"",group:"",host:"",port:null,secure:!1,user:"",pass:"",from:"",to:"",timeout:null,ignoreTLS:!1},o.value=!1,f.value=!1,V.value=!1,B.value=!1)},0))},Q=a=>({wechat_work:"企业微信",dingtalk:"钉钉",feishu:"飞书",slack:"Slack",discord:"Discord",telegram:"Telegram",bark:"Bark",smtp:"邮件通知",custom:"自定义"})[a]||a,fe=a=>({wechat_work:"fab fa-weixin text-green-600",dingtalk:"fas fa-comment-dots text-blue-500",feishu:"fas fa-dove text-blue-600",slack:"fab fa-slack text-purple-600",discord:"fab fa-discord text-indigo-600",telegram:"fab fa-telegram-plane text-sky-500",bark:"fas fa-bell text-orange-500",smtp:"fas fa-envelope text-blue-600",custom:"fas fa-webhook text-gray-600"})[a]||"fas fa-bell",_=a=>({wechat_work:"请在企业微信群机器人设置中获取Webhook地址",dingtalk:"请在钉钉群机器人设置中获取Webhook地址",feishu:"请在飞书群机器人设置中获取Webhook地址",slack:"请在Slack应用的Incoming Webhooks中获取地址",discord:"请在Discord服务器的集成设置中创建Webhook",telegram:"使用 @BotFather 创建机器人并复制 Token，Chat ID 可通过 @userinfobot 或相关工具获取",bark:"请在Bark App中查看您的设备密钥",smtp:"请配置SMTP服务器信息，支持Gmail、QQ邮箱等",custom:"请输入完整的Webhook接收地址"})[a]||"",xe=a=>a?a.length<=12?a:`${a.slice(0,6)}...${a.slice(-4)}`:"",ye=a=>({accountAnomaly:"账号异常",quotaWarning:"配额警告",systemError:"系统错误",securityAlert:"安全警报",rateLimitRecovery:"限流恢复",test:"测试通知"})[a]||a,pe=a=>({accountAnomaly:"账号状态异常、认证失败等",quotaWarning:"API调用配额不足警告",systemError:"系统运行错误和故障",securityAlert:"安全相关的警报通知",rateLimitRecovery:"限流状态恢复时发送提醒",test:"用于测试Webhook连接是否正常"})[a]||"",J=async()=>{try{const a={siteName:b.value.siteName,siteIcon:b.value.siteIcon,siteIconData:b.value.siteIconData,showAdminButton:b.value.showAdminButton},t=await C.saveOemSettings(a);t&&t.success?d("OEM设置保存成功","success"):d((t==null?void 0:t.message)||"保存失败","error")}catch{d("保存OEM设置失败","error")}},X=async()=>{if(confirm(`确定要重置为默认设置吗？

这将清除所有自定义的网站名称和图标设置。`))try{const a=await C.resetOemSettings();a&&a.success?d("已重置为默认设置","success"):d("重置失败","error")}catch{d("重置失败","error")}},Y=async a=>{const t=a.target.files[0];if(!t)return;const s=C.validateIconFile(t);if(!s.isValid){s.errors.forEach(m=>d(m,"error"));return}try{const m=await C.fileToBase64(t);b.value.siteIconData=m}catch{d("文件读取失败","error")}a.target.value=""},G=()=>{b.value.siteIcon="",b.value.siteIconData=""},Z=()=>{console.warn("Icon failed to load")},ee=C.formatDateTime;return(a,t)=>(i(),n($,null,[e("div",Be,[e("div",Ve,[t[82]||(t[82]=e("div",{class:"mb-4 sm:mb-6"},[e("h3",{class:"mb-1 text-lg font-bold text-gray-900 dark:text-gray-100 sm:mb-2 sm:text-xl"}," 系统设置 "),e("p",{class:"text-sm text-gray-600 dark:text-gray-400 sm:text-base"},"网站定制和通知配置")],-1)),e("div",De,[e("nav",Pe,[e("button",{class:D(["border-b-2 pb-2 text-sm font-medium transition-colors",T.value==="branding"?"border-blue-500 text-blue-600 dark:border-blue-400 dark:text-blue-400":"border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300"]),onClick:t[0]||(t[0]=s=>T.value="branding")},t[35]||(t[35]=[e("i",{class:"fas fa-palette mr-2"},null,-1),l(" 品牌设置 ",-1)]),2),e("button",{class:D(["border-b-2 pb-2 text-sm font-medium transition-colors",T.value==="webhook"?"border-blue-500 text-blue-600 dark:border-blue-400 dark:text-blue-400":"border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300"]),onClick:t[1]||(t[1]=s=>T.value="webhook")},t[36]||(t[36]=[e("i",{class:"fas fa-bell mr-2"},null,-1),l(" 通知设置 ",-1)]),2)])]),c(E)?(i(),n("div",Le,t[37]||(t[37]=[e("div",{class:"loading-spinner mx-auto mb-4"},null,-1),e("p",{class:"text-gray-500 dark:text-gray-400"},"正在加载设置...",-1)]))):(i(),n("div",je,[u(e("div",null,[e("div",Ee,[e("table",Fe,[e("tbody",Ne,[e("tr",Re,[t[39]||(t[39]=e("td",{class:"w-48 whitespace-nowrap px-6 py-4"},[e("div",{class:"flex items-center"},[e("div",{class:"mr-3 flex h-8 w-8 items-center justify-center rounded-lg bg-gradient-to-br from-blue-500 to-blue-600"},[e("i",{class:"fas fa-font text-xs text-white"})]),e("div",null,[e("div",{class:"text-sm font-semibold text-gray-900 dark:text-gray-100"}," 网站名称 "),e("div",{class:"text-xs text-gray-500 dark:text-gray-400"},"品牌标识")])])],-1)),e("td",We,[u(e("input",{"onUpdate:modelValue":t[2]||(t[2]=s=>c(b).siteName=s),class:"form-input w-full max-w-md dark:border-gray-600 dark:bg-gray-700 dark:text-gray-200",maxlength:"100",placeholder:"Claude Relay Service",type:"text"},null,512),[[y,c(b).siteName]]),t[38]||(t[38]=e("p",{class:"mt-1 text-xs text-gray-500 dark:text-gray-400"}," 将显示在浏览器标题和页面头部 ",-1))])]),e("tr",Ke,[t[44]||(t[44]=e("td",{class:"w-48 whitespace-nowrap px-6 py-4"},[e("div",{class:"flex items-center"},[e("div",{class:"mr-3 flex h-8 w-8 items-center justify-center rounded-lg bg-gradient-to-br from-purple-500 to-purple-600"},[e("i",{class:"fas fa-image text-xs text-white"})]),e("div",null,[e("div",{class:"text-sm font-semibold text-gray-900 dark:text-gray-100"}," 网站图标 "),e("div",{class:"text-xs text-gray-500 dark:text-gray-400"},"Favicon")])])],-1)),e("td",Oe,[e("div",Me,[c(b).siteIconData||c(b).siteIcon?(i(),n("div",$e,[e("img",{alt:"图标预览",class:"h-8 w-8",src:c(b).siteIconData||c(b).siteIcon,onError:Z},null,40,qe),t[41]||(t[41]=e("span",{class:"text-sm text-gray-600 dark:text-gray-400"},"当前图标",-1)),e("button",{class:"rounded-lg px-3 py-1 font-medium text-red-600 transition-colors hover:bg-red-50 hover:text-red-900",onClick:G},t[40]||(t[40]=[e("i",{class:"fas fa-trash mr-1"},null,-1),l("删除 ",-1)]))])):x("",!0),e("div",null,[e("input",{ref_key:"iconFileInput",ref:M,accept:".ico,.png,.jpg,.jpeg,.svg",class:"hidden",type:"file",onChange:Y},null,544),e("button",{class:"btn btn-success px-4 py-2",onClick:t[3]||(t[3]=s=>a.$refs.iconFileInput.click())},t[42]||(t[42]=[e("i",{class:"fas fa-upload mr-2"},null,-1),l(" 上传图标 ",-1)])),t[43]||(t[43]=e("span",{class:"ml-3 text-xs text-gray-500 dark:text-gray-400"},"支持 .ico, .png, .jpg, .svg 格式，最大 350KB",-1))])])])]),e("tr",ze,[t[47]||(t[47]=e("td",{class:"w-48 whitespace-nowrap px-6 py-4"},[e("div",{class:"flex items-center"},[e("div",{class:"mr-3 flex h-8 w-8 items-center justify-center rounded-lg bg-gradient-to-br from-indigo-500 to-purple-600"},[e("i",{class:"fas fa-eye-slash text-xs text-white"})]),e("div",null,[e("div",{class:"text-sm font-semibold text-gray-900 dark:text-gray-100"}," 管理入口 "),e("div",{class:"text-xs text-gray-500 dark:text-gray-400"},"登录按钮显示")])])],-1)),e("td",He,[e("div",Qe,[e("label",_e,[u(e("input",{"onUpdate:modelValue":t[4]||(t[4]=s=>P.value=s),class:"peer sr-only",type:"checkbox"},null,512),[[W,P.value]]),t[45]||(t[45]=e("div",{class:"peer relative h-6 w-11 rounded-full bg-gray-200 after:absolute after:left-[2px] after:top-[2px] after:h-5 after:w-5 after:rounded-full after:border after:border-gray-300 after:bg-white after:transition-all after:content-[''] peer-checked:bg-blue-600 peer-checked:after:translate-x-full peer-checked:after:border-white peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:border-gray-600 dark:bg-gray-700 dark:peer-focus:ring-blue-800"},null,-1)),e("span",Je,p(P.value?"隐藏登录按钮":"显示登录按钮"),1)])]),t[46]||(t[46]=e("p",{class:"mt-1 text-xs text-gray-500 dark:text-gray-400"}," 隐藏后，用户需要直接访问 /admin/login 页面登录 ",-1))])]),e("tr",null,[e("td",Xe,[e("div",Ye,[e("div",Ge,[e("button",{class:D(["btn btn-primary px-6 py-3",{"cursor-not-allowed opacity-50":c(U)}]),disabled:c(U),onClick:J},[c(U)?(i(),n("div",et)):(i(),n("i",tt)),l(" "+p(c(U)?"保存中...":"保存设置"),1)],10,Ze),e("button",{class:"btn bg-gray-100 px-6 py-3 text-gray-700 hover:bg-gray-200 dark:bg-gray-700 dark:text-gray-300 dark:hover:bg-gray-600",disabled:c(U),onClick:X},t[48]||(t[48]=[e("i",{class:"fas fa-undo mr-2"},null,-1),l(" 重置为默认 ",-1)]),8,rt)]),c(b).updatedAt?(i(),n("div",at,[t[49]||(t[49]=e("i",{class:"fas fa-clock mr-1"},null,-1)),l(" 最后更新："+p(c(ee)(c(b).updatedAt)),1)])):x("",!0)])])])])])]),e("div",st,[e("div",lt,[t[50]||(t[50]=j('<div class="mb-3 flex items-center gap-3" data-v-cbfbb479><div class="flex h-10 w-10 flex-shrink-0 items-center justify-center rounded-xl bg-gradient-to-br from-blue-500 to-cyan-600 text-white shadow-md" data-v-cbfbb479><i class="fas fa-tag" data-v-cbfbb479></i></div><div data-v-cbfbb479><h3 class="text-base font-semibold text-gray-900 dark:text-gray-100" data-v-cbfbb479>站点名称</h3><p class="text-sm text-gray-500 dark:text-gray-400" data-v-cbfbb479>自定义您的站点品牌名称</p></div></div>',1)),u(e("input",{"onUpdate:modelValue":t[5]||(t[5]=s=>c(b).siteName=s),class:"form-input w-full dark:border-gray-600 dark:bg-gray-700 dark:text-gray-200",maxlength:"100",placeholder:"Claude Relay Service",type:"text"},null,512),[[y,c(b).siteName]])]),e("div",ot,[t[54]||(t[54]=j('<div class="mb-3 flex items-center gap-3" data-v-cbfbb479><div class="flex h-10 w-10 flex-shrink-0 items-center justify-center rounded-xl bg-gradient-to-br from-purple-500 to-pink-600 text-white shadow-md" data-v-cbfbb479><i class="fas fa-image" data-v-cbfbb479></i></div><div data-v-cbfbb479><h3 class="text-base font-semibold text-gray-900 dark:text-gray-100" data-v-cbfbb479>站点图标</h3><p class="text-sm text-gray-500 dark:text-gray-400" data-v-cbfbb479> 上传自定义图标或输入图标URL </p></div></div>',1)),e("div",nt,[c(b).siteIconData||c(b).siteIcon?(i(),n("div",it,[e("img",{alt:"图标预览",class:"h-8 w-8",src:c(b).siteIconData||c(b).siteIcon,onError:Z},null,40,dt),t[51]||(t[51]=e("span",{class:"text-sm text-gray-600 dark:text-gray-400"},"当前图标",-1)),e("button",{class:"rounded-lg px-3 py-1 font-medium text-red-600 transition-colors hover:bg-red-50 hover:text-red-900",onClick:G}," 删除 ")])):x("",!0),e("div",null,[e("input",{ref:"iconFileInputMobile",accept:".ico,.png,.jpg,.jpeg,.svg",class:"hidden",type:"file",onChange:Y},null,544),e("button",{class:"btn btn-success px-4 py-2",onClick:t[6]||(t[6]=s=>a.$refs.iconFileInputMobile.click())},t[52]||(t[52]=[e("i",{class:"fas fa-upload mr-2"},null,-1),l(" 上传图标 ",-1)])),t[53]||(t[53]=e("p",{class:"mt-2 text-xs text-gray-500 dark:text-gray-400"}," 支持 .ico, .png, .jpg, .svg 格式，最大 350KB ",-1))])])]),e("div",ut,[t[57]||(t[57]=j('<div class="mb-3 flex items-center gap-3" data-v-cbfbb479><div class="flex h-10 w-10 flex-shrink-0 items-center justify-center rounded-xl bg-gradient-to-br from-indigo-500 to-purple-600 text-white shadow-md" data-v-cbfbb479><i class="fas fa-eye-slash" data-v-cbfbb479></i></div><div data-v-cbfbb479><h3 class="text-base font-semibold text-gray-900 dark:text-gray-100" data-v-cbfbb479>管理入口</h3><p class="text-sm text-gray-500 dark:text-gray-400" data-v-cbfbb479>控制登录按钮在首页的显示</p></div></div>',1)),e("div",gt,[e("label",ct,[u(e("input",{"onUpdate:modelValue":t[7]||(t[7]=s=>P.value=s),class:"peer sr-only",type:"checkbox"},null,512),[[W,P.value]]),t[55]||(t[55]=e("div",{class:"peer relative h-6 w-11 rounded-full bg-gray-200 after:absolute after:left-[2px] after:top-[2px] after:h-5 after:w-5 after:rounded-full after:border after:border-gray-300 after:bg-white after:transition-all after:content-[''] peer-checked:bg-blue-600 peer-checked:after:translate-x-full peer-checked:after:border-white peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:border-gray-600 dark:bg-gray-700 dark:peer-focus:ring-blue-800"},null,-1)),e("span",bt,p(P.value?"隐藏登录按钮":"显示登录按钮"),1)]),t[56]||(t[56]=e("p",{class:"text-xs text-gray-500 dark:text-gray-400"}," 隐藏后，用户需要直接访问 /admin/login 页面登录 ",-1))])]),e("div",ft,[e("div",xt,[e("button",{class:D(["btn btn-primary w-full px-6 py-3",{"cursor-not-allowed opacity-50":c(U)}]),disabled:c(U),onClick:J},[c(U)?(i(),n("div",pt)):(i(),n("i",vt)),l(" "+p(c(U)?"保存中...":"保存设置"),1)],10,yt),e("button",{class:"btn w-full bg-gray-100 px-6 py-3 text-gray-700 hover:bg-gray-200 dark:bg-gray-700 dark:text-gray-300 dark:hover:bg-gray-600",disabled:c(U),onClick:X},t[58]||(t[58]=[e("i",{class:"fas fa-undo mr-2"},null,-1),l(" 重置为默认 ",-1)]),8,mt),c(b).updatedAt?(i(),n("div",kt,[t[59]||(t[59]=e("i",{class:"fas fa-clock mr-1"},null,-1)),l(" 上次更新: "+p(c(ee)(c(b).updatedAt)),1)])):x("",!0)])])])],512),[[ae,T.value==="branding"]]),u(e("div",null,[e("div",ht,[e("div",wt,[t[61]||(t[61]=e("div",null,[e("h2",{class:"text-lg font-semibold text-gray-800 dark:text-gray-200"},"启用通知"),e("p",{class:"mt-1 text-sm text-gray-600 dark:text-gray-400"}," 开启后，系统将按配置发送通知到指定平台 ")],-1)),e("label",Ut,[u(e("input",{"onUpdate:modelValue":t[8]||(t[8]=s=>v.value.enabled=s),class:"peer sr-only",type:"checkbox",onChange:R},null,544),[[W,v.value.enabled]]),t[60]||(t[60]=e("div",{class:"peer h-6 w-11 rounded-full bg-gray-200 after:absolute after:left-[2px] after:top-[2px] after:h-5 after:w-5 after:rounded-full after:border after:border-gray-300 after:bg-white after:transition-all after:content-[''] peer-checked:bg-blue-600 peer-checked:after:translate-x-full peer-checked:after:border-white peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:border-gray-600 dark:bg-gray-700 dark:peer-focus:ring-blue-800"},null,-1))])])]),e("div",Tt,[t[63]||(t[63]=e("h2",{class:"mb-4 text-lg font-semibold text-gray-800 dark:text-gray-200"},"通知类型",-1)),e("div",St,[(i(!0),n($,null,se(v.value.notificationTypes,(s,m)=>(i(),n("div",{key:m,class:"flex items-center justify-between"},[e("div",null,[e("span",It,p(ye(m)),1),e("span",Ct,p(pe(m)),1)]),e("label",At,[u(e("input",{"onUpdate:modelValue":h=>v.value.notificationTypes[m]=h,class:"peer sr-only",type:"checkbox",onChange:R},null,40,Bt),[[W,v.value.notificationTypes[m]]]),t[62]||(t[62]=e("div",{class:"peer h-5 w-9 rounded-full bg-gray-200 after:absolute after:left-[2px] after:top-[2px] after:h-4 after:w-4 after:rounded-full after:border after:border-gray-300 after:bg-white after:transition-all after:content-[''] peer-checked:bg-green-600 peer-checked:after:translate-x-full peer-checked:after:border-white dark:border-gray-600 dark:bg-gray-700"},null,-1))])]))),128))])]),e("div",Vt,[e("div",Dt,[t[65]||(t[65]=e("h2",{class:"text-lg font-semibold text-gray-800 dark:text-gray-200"},"通知平台",-1)),e("button",{class:"rounded-lg bg-blue-600 px-4 py-2 text-sm font-medium text-white transition-colors hover:bg-blue-700",onClick:t[9]||(t[9]=s=>L.value=!0)},t[64]||(t[64]=[e("i",{class:"fas fa-plus mr-2"},null,-1),l(" 添加平台 ",-1)]))]),v.value.platforms&&v.value.platforms.length>0?(i(),n("div",Pt,[(i(!0),n($,null,se(v.value.platforms,s=>(i(),n("div",{key:s.id,class:"rounded-lg border border-gray-200 p-4 dark:border-gray-700"},[e("div",Lt,[e("div",jt,[e("div",Et,[e("i",{class:D(["mr-3 text-xl",fe(s.type)])},null,2),e("div",null,[e("h3",Ft,p(s.name||Q(s.type)),1),e("p",Nt,p(Q(s.type)),1)])]),e("div",Rt,[s.type!=="smtp"&&s.type!=="telegram"?(i(),n("div",Wt,[t[66]||(t[66]=e("i",{class:"fas fa-link mr-2"},null,-1)),e("span",Kt,p(s.url),1)])):x("",!0),s.type==="telegram"?(i(),n("div",Ot,[t[67]||(t[67]=e("i",{class:"fas fa-comments mr-2"},null,-1)),e("span",Mt,"Chat ID: "+p(s.chatId||"未配置"),1)])):x("",!0),s.type==="telegram"&&s.botToken?(i(),n("div",$t,[t[68]||(t[68]=e("i",{class:"fas fa-key mr-2"},null,-1)),e("span",qt,"Token: "+p(xe(s.botToken)),1)])):x("",!0),s.type==="telegram"&&s.apiBaseUrl?(i(),n("div",zt,[t[69]||(t[69]=e("i",{class:"fas fa-globe mr-2"},null,-1)),e("span",Ht,"API: "+p(s.apiBaseUrl),1)])):x("",!0),s.type==="telegram"&&s.proxyUrl?(i(),n("div",Qt,[t[70]||(t[70]=e("i",{class:"fas fa-route mr-2"},null,-1)),e("span",_t,"代理: "+p(s.proxyUrl),1)])):x("",!0),s.type==="smtp"&&s.to?(i(),n("div",Jt,[t[71]||(t[71]=e("i",{class:"fas fa-envelope mr-2"},null,-1)),e("span",Xt,p(Array.isArray(s.to)?s.to.join(", "):s.to),1)])):x("",!0),s.enableSign?(i(),n("div",Yt,t[72]||(t[72]=[e("i",{class:"fas fa-shield-alt mr-2"},null,-1),e("span",null,"已启用签名验证",-1)]))):x("",!0)])]),e("div",Gt,[e("label",Zt,[e("input",{checked:s.enabled,class:"peer sr-only",type:"checkbox",onChange:m=>ue(s.id)},null,40,er),t[73]||(t[73]=e("div",{class:"peer h-5 w-9 rounded-full bg-gray-200 after:absolute after:left-[2px] after:top-[2px] after:h-4 after:w-4 after:rounded-full after:border after:border-gray-300 after:bg-white after:transition-all after:content-[''] peer-checked:bg-green-600 peer-checked:after:translate-x-full peer-checked:after:border-white dark:border-gray-600 dark:bg-gray-700"},null,-1))]),e("button",{class:"rounded-lg bg-blue-100 p-2 text-blue-600 transition-colors hover:bg-blue-200 dark:bg-blue-900 dark:text-blue-400 dark:hover:bg-blue-800",title:"测试连接",onClick:m=>ge(s)},t[74]||(t[74]=[e("i",{class:"fas fa-vial"},null,-1)]),8,tr),e("button",{class:"rounded-lg bg-gray-100 p-2 text-gray-600 transition-colors hover:bg-gray-200 dark:bg-gray-700 dark:text-gray-400 dark:hover:bg-gray-600",title:"编辑",onClick:m=>ie(s)},t[75]||(t[75]=[e("i",{class:"fas fa-edit"},null,-1)]),8,rr),e("button",{class:"rounded-lg bg-red-100 p-2 text-red-600 transition-colors hover:bg-red-200 dark:bg-red-900 dark:text-red-400 dark:hover:bg-red-800",title:"删除",onClick:m=>de(s.id)},t[76]||(t[76]=[e("i",{class:"fas fa-trash"},null,-1)]),8,ar)])])]))),128))])):(i(),n("div",sr,' 暂无配置的通知平台，请点击"添加平台"按钮添加 '))]),e("div",lr,[t[80]||(t[80]=e("h2",{class:"mb-4 text-lg font-semibold text-gray-800 dark:text-gray-200"},"高级设置",-1)),e("div",or,[e("div",null,[t[77]||(t[77]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300"}," 最大重试次数 ",-1)),u(e("input",{"onUpdate:modelValue":t[10]||(t[10]=s=>v.value.retrySettings.maxRetries=s),class:"mt-1 block w-full rounded-lg border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white sm:text-sm",max:"10",min:"0",type:"number",onChange:R},null,544),[[y,v.value.retrySettings.maxRetries,void 0,{number:!0}]])]),e("div",null,[t[78]||(t[78]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300"}," 重试延迟 (毫秒) ",-1)),u(e("input",{"onUpdate:modelValue":t[11]||(t[11]=s=>v.value.retrySettings.retryDelay=s),class:"mt-1 block w-full rounded-lg border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white sm:text-sm",max:"10000",min:"100",step:"100",type:"number",onChange:R},null,544),[[y,v.value.retrySettings.retryDelay,void 0,{number:!0}]])]),e("div",null,[t[79]||(t[79]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300"}," 超时时间 (毫秒) ",-1)),u(e("input",{"onUpdate:modelValue":t[12]||(t[12]=s=>v.value.retrySettings.timeout=s),class:"mt-1 block w-full rounded-lg border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white sm:text-sm",max:"30000",min:"1000",step:"1000",type:"number",onChange:R},null,544),[[y,v.value.retrySettings.timeout,void 0,{number:!0}]])])])]),e("div",{class:"mt-6 text-center"},[e("button",{class:"rounded-lg bg-green-600 px-6 py-3 text-white shadow-lg transition-all hover:bg-green-700 hover:shadow-xl",onClick:be},t[81]||(t[81]=[e("i",{class:"fas fa-paper-plane mr-2"},null,-1),l(" 发送测试通知 ",-1)]))])],512),[[ae,T.value==="webhook"]])]))])]),L.value?(i(),n("div",{key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm transition-all duration-300 ease-out",onClick:K},[e("div",{class:"relative mx-4 w-full max-w-2xl overflow-hidden rounded-2xl bg-white shadow-2xl transition-all duration-300 ease-out dark:bg-gray-800",onClick:t[34]||(t[34]=Ie(()=>{},["stop"]))},[e("div",nr,[e("div",ir,[e("div",dr,[t[83]||(t[83]=e("div",{class:"flex h-10 w-10 items-center justify-center rounded-full bg-gradient-to-br from-blue-500 to-indigo-600 text-white shadow-lg"},[e("i",{class:"fas fa-bell"})],-1)),e("div",null,[e("h3",ur,p(I.value?"编辑":"添加")+"通知平台 ",1),e("p",gr," 配置"+p(I.value?"并更新":"新的")+"Webhook通知渠道 ",1)])]),e("button",{class:"rounded-lg p-2 text-gray-400 transition-colors hover:bg-gray-100 hover:text-gray-600 dark:hover:bg-gray-700 dark:hover:text-gray-300",onClick:K},t[84]||(t[84]=[e("i",{class:"fas fa-times text-lg"},null,-1)]))])]),e("div",cr,[e("div",br,[e("div",null,[t[88]||(t[88]=e("label",{class:"mb-2 flex items-center text-sm font-medium text-gray-700 dark:text-gray-300"},[e("i",{class:"fas fa-layer-group mr-2 text-gray-400"}),l(" 平台类型 ")],-1)),e("div",fr,[u(e("select",{"onUpdate:modelValue":t[13]||(t[13]=s=>r.value.type=s),class:"w-full appearance-none rounded-xl border border-gray-300 bg-white px-4 py-3 pr-10 text-gray-900 shadow-sm transition-all focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:border-gray-600 dark:bg-gray-700 dark:text-white",disabled:I.value},t[85]||(t[85]=[j('<option value="wechat_work" data-v-cbfbb479>🟢 企业微信</option><option value="dingtalk" data-v-cbfbb479>🔵 钉钉</option><option value="feishu" data-v-cbfbb479>🟦 飞书</option><option value="slack" data-v-cbfbb479>🟣 Slack</option><option value="discord" data-v-cbfbb479>🟪 Discord</option><option value="telegram" data-v-cbfbb479>✈️ Telegram</option><option value="bark" data-v-cbfbb479>🔔 Bark</option><option value="smtp" data-v-cbfbb479>📧 邮件通知</option><option value="custom" data-v-cbfbb479>⚙️ 自定义</option>',9)]),8,xr),[[O,r.value.type]]),t[86]||(t[86]=e("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-3"},[e("i",{class:"fas fa-chevron-down text-gray-400"})],-1))]),I.value?(i(),n("p",yr,t[87]||(t[87]=[e("i",{class:"fas fa-info-circle mr-1"},null,-1),l(" 编辑模式下不能更改平台类型 ",-1)]))):x("",!0)]),e("div",null,[t[89]||(t[89]=e("label",{class:"mb-2 flex items-center text-sm font-medium text-gray-700 dark:text-gray-300"},[e("i",{class:"fas fa-tag mr-2 text-gray-400"}),l(" 名称 "),e("span",{class:"ml-2 text-xs text-gray-500"},"(可选)")],-1)),u(e("input",{"onUpdate:modelValue":t[14]||(t[14]=s=>r.value.name=s),class:"w-full rounded-xl border border-gray-300 bg-white px-4 py-3 text-gray-900 shadow-sm transition-all placeholder:text-gray-400 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:border-gray-600 dark:bg-gray-700 dark:text-white dark:placeholder:text-gray-500",placeholder:"例如：运维群通知、开发测试群",type:"text"},null,512),[[y,r.value.name]])]),r.value.type!=="bark"&&r.value.type!=="smtp"&&r.value.type!=="telegram"?(i(),n("div",pr,[t[93]||(t[93]=e("label",{class:"mb-2 flex items-center text-sm font-medium text-gray-700 dark:text-gray-300"},[e("i",{class:"fas fa-link mr-2 text-gray-400"}),l(" Webhook URL "),e("span",{class:"ml-1 text-xs text-red-500"},"*")],-1)),e("div",vr,[u(e("input",{"onUpdate:modelValue":t[15]||(t[15]=s=>r.value.url=s),class:D(["w-full rounded-xl border border-gray-300 bg-white px-4 py-3 pr-10 font-mono text-sm text-gray-900 shadow-sm transition-all placeholder:text-gray-400 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:border-gray-600 dark:bg-gray-700 dark:text-white dark:placeholder:text-gray-500",{"border-red-500 focus:border-red-500 focus:ring-red-500/20":o.value,"border-green-500 focus:border-green-500 focus:ring-green-500/20":f.value}]),placeholder:"https://...",required:"",type:"url",onInput:oe},null,34),[[y,r.value.url]]),f.value?(i(),n("div",mr,t[90]||(t[90]=[e("i",{class:"fas fa-check-circle text-green-500"},null,-1)]))):x("",!0),o.value?(i(),n("div",kr,t[91]||(t[91]=[e("i",{class:"fas fa-exclamation-circle text-red-500"},null,-1)]))):x("",!0)]),_(r.value.type)?(i(),n("div",hr,[t[92]||(t[92]=e("i",{class:"fas fa-info-circle mr-2 mt-0.5 text-blue-600 dark:text-blue-400"},null,-1)),e("p",wr,p(_(r.value.type)),1)])):x("",!0)])):x("",!0),r.value.type==="telegram"?(i(),n("div",Ur,[e("div",null,[t[94]||(t[94]=e("label",{class:"mb-2 flex items-center text-sm font-medium text-gray-700 dark:text-gray-300"},[e("i",{class:"fas fa-robot mr-2 text-gray-400"}),l(" Bot Token "),e("span",{class:"ml-1 text-xs text-red-500"},"*")],-1)),u(e("input",{"onUpdate:modelValue":t[16]||(t[16]=s=>r.value.botToken=s),class:"w-full rounded-xl border border-gray-300 bg-white px-4 py-3 font-mono text-sm text-gray-900 shadow-sm transition-all placeholder:text-gray-400 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:border-gray-600 dark:bg-gray-700 dark:text-white dark:placeholder:text-gray-500",placeholder:"例如：123456789:ABCDEFghijk-xyz",required:"",type:"text"},null,512),[[y,r.value.botToken]]),t[95]||(t[95]=e("p",{class:"mt-1 text-xs text-gray-500 dark:text-gray-400"}," 在 Telegram 的 @BotFather 中创建机器人后获得的 Token ",-1))]),e("div",null,[t[96]||(t[96]=e("label",{class:"mb-2 flex items-center text-sm font-medium text-gray-700 dark:text-gray-300"},[e("i",{class:"fas fa-comments mr-2 text-gray-400"}),l(" Chat ID "),e("span",{class:"ml-1 text-xs text-red-500"},"*")],-1)),u(e("input",{"onUpdate:modelValue":t[17]||(t[17]=s=>r.value.chatId=s),class:"w-full rounded-xl border border-gray-300 bg-white px-4 py-3 font-mono text-sm text-gray-900 shadow-sm transition-all placeholder:text-gray-400 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:border-gray-600 dark:bg-gray-700 dark:text-white dark:placeholder:text-gray-500",placeholder:"例如：123456789 或 -1001234567890",required:"",type:"text"},null,512),[[y,r.value.chatId]]),t[97]||(t[97]=e("p",{class:"mt-1 text-xs text-gray-500 dark:text-gray-400"}," 可使用 @userinfobot、@RawDataBot 或 API 获取聊天/频道的 Chat ID ",-1))]),e("div",null,[t[98]||(t[98]=e("label",{class:"mb-2 flex items-center text-sm font-medium text-gray-700 dark:text-gray-300"},[e("i",{class:"fas fa-globe mr-2 text-gray-400"}),l(" API 基础地址 "),e("span",{class:"ml-2 text-xs text-gray-500"},"(可选)")],-1)),u(e("input",{"onUpdate:modelValue":t[18]||(t[18]=s=>r.value.apiBaseUrl=s),class:"w-full rounded-xl border border-gray-300 bg-white px-4 py-3 font-mono text-sm text-gray-900 shadow-sm transition-all placeholder:text-gray-400 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:border-gray-600 dark:bg-gray-700 dark:text-white dark:placeholder:text-gray-500",placeholder:"默认: https://api.telegram.org",type:"url"},null,512),[[y,r.value.apiBaseUrl]]),t[99]||(t[99]=e("p",{class:"mt-1 text-xs text-gray-500 dark:text-gray-400"}," 使用自建 Bot API 时可覆盖默认域名，需以 http 或 https 开头 ",-1))]),e("div",null,[t[100]||(t[100]=e("label",{class:"mb-2 flex items-center text-sm font-medium text-gray-700 dark:text-gray-300"},[e("i",{class:"fas fa-route mr-2 text-gray-400"}),l(" 代理地址 "),e("span",{class:"ml-2 text-xs text-gray-500"},"(可选)")],-1)),u(e("input",{"onUpdate:modelValue":t[19]||(t[19]=s=>r.value.proxyUrl=s),class:"w-full rounded-xl border border-gray-300 bg-white px-4 py-3 font-mono text-sm text-gray-900 shadow-sm transition-all placeholder:text-gray-400 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:border-gray-600 dark:bg-gray-700 dark:text-white dark:placeholder:text-gray-500",placeholder:"例如：socks5://user:pass@127.0.0.1:1080",type:"text"},null,512),[[y,r.value.proxyUrl]]),t[101]||(t[101]=e("p",{class:"mt-1 text-xs text-gray-500 dark:text-gray-400"}," 支持 http、https、socks4/4a/5 代理，留空则直接连接 Telegram 官方 API ",-1))]),t[102]||(t[102]=e("div",{class:"flex items-start rounded-lg bg-blue-50 p-3 text-sm text-blue-700 dark:bg-blue-900/20 dark:text-blue-300"},[e("i",{class:"fas fa-info-circle mr-2 mt-0.5"}),e("div",null,"机器人需先加入对应群组或频道并授予发送消息权限，通知会以纯文本方式发送。")],-1))])):x("",!0),r.value.type==="bark"?(i(),n("div",Tr,[e("div",null,[t[103]||(t[103]=e("label",{class:"mb-2 flex items-center text-sm font-medium text-gray-700 dark:text-gray-300"},[e("i",{class:"fas fa-key mr-2 text-gray-400"}),l(" 设备密钥 (Device Key) "),e("span",{class:"ml-1 text-xs text-red-500"},"*")],-1)),u(e("input",{"onUpdate:modelValue":t[20]||(t[20]=s=>r.value.deviceKey=s),class:"w-full rounded-xl border border-gray-300 bg-white px-4 py-3 font-mono text-sm text-gray-900 shadow-sm transition-all placeholder:text-gray-400 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:border-gray-600 dark:bg-gray-700 dark:text-white dark:placeholder:text-gray-500",placeholder:"例如：aBcDeFgHiJkLmNoPqRsTuVwX",required:"",type:"text"},null,512),[[y,r.value.deviceKey]]),t[104]||(t[104]=e("p",{class:"mt-1 text-xs text-gray-500 dark:text-gray-400"}," 在Bark App中查看您的推送密钥 ",-1))]),e("div",null,[t[105]||(t[105]=e("label",{class:"mb-2 flex items-center text-sm font-medium text-gray-700 dark:text-gray-300"},[e("i",{class:"fas fa-server mr-2 text-gray-400"}),l(" 服务器地址 "),e("span",{class:"ml-2 text-xs text-gray-500"},"(可选)")],-1)),u(e("input",{"onUpdate:modelValue":t[21]||(t[21]=s=>r.value.serverUrl=s),class:"w-full rounded-xl border border-gray-300 bg-white px-4 py-3 font-mono text-sm text-gray-900 shadow-sm transition-all placeholder:text-gray-400 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:border-gray-600 dark:bg-gray-700 dark:text-white dark:placeholder:text-gray-500",placeholder:"默认: https://api.day.app/push",type:"url"},null,512),[[y,r.value.serverUrl]])]),e("div",null,[t[107]||(t[107]=e("label",{class:"mb-2 flex items-center text-sm font-medium text-gray-700 dark:text-gray-300"},[e("i",{class:"fas fa-flag mr-2 text-gray-400"}),l(" 通知级别 ")],-1)),u(e("select",{"onUpdate:modelValue":t[22]||(t[22]=s=>r.value.level=s),class:"w-full appearance-none rounded-xl border border-gray-300 bg-white px-4 py-3 pr-10 text-gray-900 shadow-sm transition-all focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:border-gray-600 dark:bg-gray-700 dark:text-white"},t[106]||(t[106]=[j('<option value="" data-v-cbfbb479>自动（根据通知类型）</option><option value="passive" data-v-cbfbb479>被动</option><option value="active" data-v-cbfbb479>默认</option><option value="timeSensitive" data-v-cbfbb479>时效性</option><option value="critical" data-v-cbfbb479>紧急</option>',5)]),512),[[O,r.value.level]])]),e("div",null,[t[109]||(t[109]=e("label",{class:"mb-2 flex items-center text-sm font-medium text-gray-700 dark:text-gray-300"},[e("i",{class:"fas fa-volume-up mr-2 text-gray-400"}),l(" 通知声音 ")],-1)),u(e("select",{"onUpdate:modelValue":t[23]||(t[23]=s=>r.value.sound=s),class:"w-full appearance-none rounded-xl border border-gray-300 bg-white px-4 py-3 pr-10 text-gray-900 shadow-sm transition-all focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:border-gray-600 dark:bg-gray-700 dark:text-white"},t[108]||(t[108]=[j('<option value="" data-v-cbfbb479>自动（根据通知类型）</option><option value="default" data-v-cbfbb479>默认</option><option value="alarm" data-v-cbfbb479>警报</option><option value="bell" data-v-cbfbb479>铃声</option><option value="birdsong" data-v-cbfbb479>鸟鸣</option><option value="electronic" data-v-cbfbb479>电子音</option><option value="glass" data-v-cbfbb479>玻璃</option><option value="horn" data-v-cbfbb479>喇叭</option><option value="silence" data-v-cbfbb479>静音</option>',9)]),512),[[O,r.value.sound]])]),e("div",null,[t[110]||(t[110]=e("label",{class:"mb-2 flex items-center text-sm font-medium text-gray-700 dark:text-gray-300"},[e("i",{class:"fas fa-folder mr-2 text-gray-400"}),l(" 通知分组 "),e("span",{class:"ml-2 text-xs text-gray-500"},"(可选)")],-1)),u(e("input",{"onUpdate:modelValue":t[24]||(t[24]=s=>r.value.group=s),class:"w-full rounded-xl border border-gray-300 bg-white px-4 py-3 text-gray-900 shadow-sm transition-all placeholder:text-gray-400 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:border-gray-600 dark:bg-gray-700 dark:text-white dark:placeholder:text-gray-500",placeholder:"默认: claude-relay",type:"text"},null,512),[[y,r.value.group]])]),t[111]||(t[111]=e("div",{class:"mt-2 flex items-start rounded-lg bg-blue-50 p-3 dark:bg-blue-900/20"},[e("i",{class:"fas fa-info-circle mr-2 mt-0.5 text-blue-600 dark:text-blue-400"}),e("div",{class:"text-sm text-blue-700 dark:text-blue-300"},[e("p",null,"1. 在iPhone上安装Bark App"),e("p",null,"2. 打开App获取您的设备密钥"),e("p",null,"3. 将密钥粘贴到上方输入框")])],-1))])):x("",!0),r.value.type==="smtp"?(i(),n("div",Sr,[e("div",null,[t[112]||(t[112]=e("label",{class:"mb-2 flex items-center text-sm font-medium text-gray-700 dark:text-gray-300"},[e("i",{class:"fas fa-server mr-2 text-gray-400"}),l(" SMTP 服务器 "),e("span",{class:"ml-1 text-xs text-red-500"},"*")],-1)),u(e("input",{"onUpdate:modelValue":t[25]||(t[25]=s=>r.value.host=s),class:"w-full rounded-xl border border-gray-300 bg-white px-4 py-3 text-gray-900 shadow-sm transition-all placeholder:text-gray-400 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:border-gray-600 dark:bg-gray-700 dark:text-white dark:placeholder:text-gray-500",placeholder:"例如: smtp.gmail.com",required:"",type:"text"},null,512),[[y,r.value.host]])]),e("div",Ir,[e("div",null,[t[113]||(t[113]=e("label",{class:"mb-2 flex items-center text-sm font-medium text-gray-700 dark:text-gray-300"},[e("i",{class:"fas fa-plug mr-2 text-gray-400"}),l(" 端口 ")],-1)),u(e("input",{"onUpdate:modelValue":t[26]||(t[26]=s=>r.value.port=s),class:"w-full rounded-xl border border-gray-300 bg-white px-4 py-3 text-gray-900 shadow-sm transition-all focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:border-gray-600 dark:bg-gray-700 dark:text-white",max:"65535",min:"1",placeholder:"587",type:"number"},null,512),[[y,r.value.port,void 0,{number:!0}]]),t[114]||(t[114]=e("p",{class:"mt-1 text-xs text-gray-500 dark:text-gray-400"}," 默认: 587 (TLS) 或 465 (SSL) ",-1))]),e("div",null,[t[116]||(t[116]=e("label",{class:"mb-2 flex items-center text-sm font-medium text-gray-700 dark:text-gray-300"},[e("i",{class:"fas fa-shield-alt mr-2 text-gray-400"}),l(" 加密方式 ")],-1)),u(e("select",{"onUpdate:modelValue":t[27]||(t[27]=s=>r.value.secure=s),class:"w-full appearance-none rounded-xl border border-gray-300 bg-white px-4 py-3 pr-10 text-gray-900 shadow-sm transition-all focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:border-gray-600 dark:bg-gray-700 dark:text-white"},t[115]||(t[115]=[e("option",{value:!1},"STARTTLS (端口587)",-1),e("option",{value:!0},"SSL/TLS (端口465)",-1)]),512),[[O,r.value.secure]])])]),e("div",null,[t[117]||(t[117]=e("label",{class:"mb-2 flex items-center text-sm font-medium text-gray-700 dark:text-gray-300"},[e("i",{class:"fas fa-user mr-2 text-gray-400"}),l(" 用户名 "),e("span",{class:"ml-1 text-xs text-red-500"},"*")],-1)),u(e("input",{"onUpdate:modelValue":t[28]||(t[28]=s=>r.value.user=s),class:"w-full rounded-xl border border-gray-300 bg-white px-4 py-3 text-gray-900 shadow-sm transition-all placeholder:text-gray-400 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:border-gray-600 dark:bg-gray-700 dark:text-white dark:placeholder:text-gray-500",placeholder:"user@example.com",required:"",type:"email"},null,512),[[y,r.value.user]])]),e("div",null,[t[118]||(t[118]=e("label",{class:"mb-2 flex items-center text-sm font-medium text-gray-700 dark:text-gray-300"},[e("i",{class:"fas fa-lock mr-2 text-gray-400"}),l(" 密码 / 应用密码 "),e("span",{class:"ml-1 text-xs text-red-500"},"*")],-1)),u(e("input",{"onUpdate:modelValue":t[29]||(t[29]=s=>r.value.pass=s),class:"w-full rounded-xl border border-gray-300 bg-white px-4 py-3 text-gray-900 shadow-sm transition-all placeholder:text-gray-400 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:border-gray-600 dark:bg-gray-700 dark:text-white dark:placeholder:text-gray-500",placeholder:"邮箱密码或应用专用密码",required:"",type:"password"},null,512),[[y,r.value.pass]]),t[119]||(t[119]=e("p",{class:"mt-1 text-xs text-gray-500 dark:text-gray-400"}," 建议使用应用专用密码，而非邮箱登录密码 ",-1))]),e("div",null,[t[120]||(t[120]=e("label",{class:"mb-2 flex items-center text-sm font-medium text-gray-700 dark:text-gray-300"},[e("i",{class:"fas fa-paper-plane mr-2 text-gray-400"}),l(" 发件人邮箱 "),e("span",{class:"ml-2 text-xs text-gray-500"},"(可选)")],-1)),u(e("input",{"onUpdate:modelValue":t[30]||(t[30]=s=>r.value.from=s),class:"w-full rounded-xl border border-gray-300 bg-white px-4 py-3 text-gray-900 shadow-sm transition-all placeholder:text-gray-400 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:border-gray-600 dark:bg-gray-700 dark:text-white dark:placeholder:text-gray-500",placeholder:"默认使用用户名邮箱",type:"email"},null,512),[[y,r.value.from]])]),e("div",null,[t[121]||(t[121]=e("label",{class:"mb-2 flex items-center text-sm font-medium text-gray-700 dark:text-gray-300"},[e("i",{class:"fas fa-envelope mr-2 text-gray-400"}),l(" 收件人邮箱 "),e("span",{class:"ml-1 text-xs text-red-500"},"*")],-1)),u(e("input",{"onUpdate:modelValue":t[31]||(t[31]=s=>r.value.to=s),class:"w-full rounded-xl border border-gray-300 bg-white px-4 py-3 text-gray-900 shadow-sm transition-all placeholder:text-gray-400 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:border-gray-600 dark:bg-gray-700 dark:text-white dark:placeholder:text-gray-500",placeholder:"admin@example.com",required:"",type:"email"},null,512),[[y,r.value.to]]),t[122]||(t[122]=e("p",{class:"mt-1 text-xs text-gray-500 dark:text-gray-400"},"接收通知的邮箱地址",-1))])])):x("",!0),r.value.type==="dingtalk"||r.value.type==="feishu"?(i(),n("div",Cr,[e("div",Ar,[e("div",Br,[e("label",Vr,[u(e("input",{id:"enableSign","onUpdate:modelValue":t[32]||(t[32]=s=>r.value.enableSign=s),class:"h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-2 focus:ring-blue-500 focus:ring-offset-0",type:"checkbox"},null,512),[[W,r.value.enableSign]]),t[123]||(t[123]=e("span",{class:"ml-3 flex items-center text-sm font-medium text-gray-700 dark:text-gray-300"},[e("i",{class:"fas fa-shield-alt mr-2 text-gray-400"}),l(" 启用签名验证 ")],-1))]),r.value.enableSign?(i(),n("span",Dr," 已启用 ")):x("",!0)]),Ue(Se,{"enter-active-class":"transition-all duration-200 ease-out","enter-from-class":"opacity-0 -translate-y-2","enter-to-class":"opacity-100 translate-y-0","leave-active-class":"transition-all duration-150 ease-in","leave-from-class":"opacity-100 translate-y-0","leave-to-class":"opacity-0 -translate-y-2"},{default:Te(()=>[r.value.enableSign?(i(),n("div",Pr,[t[124]||(t[124]=e("label",{class:"mb-2 block text-sm font-medium text-gray-700 dark:text-gray-300"}," 签名密钥 ",-1)),u(e("input",{"onUpdate:modelValue":t[33]||(t[33]=s=>r.value.secret=s),class:"w-full rounded-xl border border-gray-300 bg-white px-4 py-3 font-mono text-sm text-gray-900 shadow-sm transition-all placeholder:text-gray-400 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:border-gray-600 dark:bg-gray-800 dark:text-white dark:placeholder:text-gray-500",placeholder:"SEC...",type:"text"},null,512),[[y,r.value.secret]])])):x("",!0)]),_:1})])])):x("",!0)])]),e("div",Lr,[e("div",jr,[t[126]||(t[126]=e("div",{class:"text-xs text-gray-500 dark:text-gray-400"},[e("i",{class:"fas fa-asterisk mr-1 text-red-500"}),l(" 必填项 ")],-1)),e("div",Er,[e("button",{class:"group flex items-center rounded-xl border border-gray-300 bg-white px-4 py-2.5 text-sm font-medium text-gray-700 shadow-sm transition-all hover:bg-gray-50 hover:shadow-md dark:border-gray-600 dark:bg-gray-800 dark:text-gray-300 dark:hover:bg-gray-700",onClick:K},t[125]||(t[125]=[e("i",{class:"fas fa-times mr-2 transition-transform group-hover:scale-110"},null,-1),l(" 取消 ",-1)])),e("button",{class:"group flex items-center rounded-xl border border-blue-200 bg-blue-50 px-4 py-2.5 text-sm font-medium text-blue-700 shadow-sm transition-all hover:bg-blue-100 hover:shadow-md dark:border-blue-800 dark:bg-blue-900/50 dark:text-blue-300 dark:hover:bg-blue-900/70",disabled:V.value,onClick:ce},[e("i",{class:D(["mr-2 transition-transform",V.value?"fas fa-spinner fa-spin":"fas fa-vial group-hover:scale-110"])},null,2),l(" "+p(V.value?"测试中...":"测试连接"),1)],8,Fr),e("button",{class:"group flex items-center rounded-xl bg-gradient-to-r from-blue-600 to-indigo-600 px-5 py-2.5 text-sm font-medium text-white shadow-md transition-all hover:from-blue-700 hover:to-indigo-700 hover:shadow-lg disabled:cursor-not-allowed disabled:from-gray-400 disabled:to-gray-500",disabled:!le.value||B.value,onClick:ne},[e("i",{class:D(["mr-2 transition-transform",B.value?"fas fa-spinner fa-spin":"fas fa-save group-hover:scale-110"])},null,2),l(" "+p(B.value?"保存中...":I.value?"保存修改":"添加平台"),1)],8,Nr)])])])])])):x("",!0)],64))}}),$r=Ce(Rr,[["__scopeId","data-v-cbfbb479"]]);export{$r as default};
